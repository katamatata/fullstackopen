(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(0),a=t(1),r=t(15),o=t.n(r),u=t(6),i=t(3),l=function(e){var n=e.handleSubmit,t=e.nameInputValue,a=e.handleNameChange,r=e.numberInputValue,o=e.handleNumberChange;return Object(c.jsxs)("form",{onSubmit:n,children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{htmlFor:"name",children:"Name: "}),Object(c.jsx)("input",{id:"name",name:"name",value:t,onChange:a})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{htmlFor:"phone",children:"Phone Number: "}),Object(c.jsx)("input",{type:"tel",id:"phone",name:"phone",value:r,onChange:o})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"Add"})})]})},s=function(e){var n=e.persons,t=e.search,a=e.deleteContact,r=""===t?n:n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}));return Object(c.jsx)("div",{children:r.map((function(e){return Object(c.jsxs)("p",{children:[e.name," ",e.number,Object(c.jsx)("button",{onClick:function(){return a(e.id)},children:"delete"})]},e.name)}))})},d=function(e){var n=e.searchInputValue,t=e.handleSearchChange;return Object(c.jsxs)("div",{children:[Object(c.jsx)("label",{htmlFor:"search",children:"Search by Name: "}),Object(c.jsx)("input",{id:"search",name:"search",value:n,onChange:t})]})},h=function(e){var n=e.isError,t=e.message;return t?Object(c.jsx)("div",{className:n?"error":"notification",children:t}):null},b=t(4),j=t.n(b),f="/api/persons",m={getAll:function(){return j.a.get(f).then((function(e){return e.data}))},create:function(e){return j.a.post(f,e).then((function(e){return e.data}))},update:function(e,n){return j.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))},deleteContact:function(e){return j.a.delete("".concat(f,"/").concat(e))}},O=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],r=n[1],o=Object(a.useState)(""),b=Object(i.a)(o,2),j=b[0],f=b[1],O=Object(a.useState)(""),p=Object(i.a)(O,2),v=p[0],x=p[1],g=Object(a.useState)(""),C=Object(i.a)(g,2),w=C[0],S=C[1],y=Object(a.useState)(!1),I=Object(i.a)(y,2),N=I[0],T=I[1],k=Object(a.useState)(null),V=Object(i.a)(k,2),A=V[0],E=V[1];Object(a.useEffect)((function(){m.getAll().then((function(e){r(e)})).catch((function(e){T(!0),E("Connection with server is lost. Try again later."),setTimeout((function(){E(null)}),3e3)}))}),[]);return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(h,{isError:N,message:A}),Object(c.jsx)(d,{searchInputValue:w,handleSearchChange:function(e){S(e.target.value)}}),Object(c.jsx)("h3",{children:"Add a new contact"}),Object(c.jsx)(l,{handleSubmit:function(e){e.preventDefault();var n=t.map((function(e){return e.name})).includes(j);if(""===j&&""===v)T(!0),E("Please complete form"),setTimeout((function(){E(null)}),3e3);else if(n){if(window.confirm("".concat(j," is already added to contacts, replace the old number with a new one?"))){var c=t.find((function(e){return e.name===j})),a=Object(u.a)(Object(u.a)({},c),{},{number:v});m.update(c.id,a).then((function(e){r(t.map((function(n){return n.id!==c.id?n:e}))),f(""),x(""),T(!1),E("Contact ".concat(j," was updated.")),setTimeout((function(){E(null)}),3e3)})).catch((function(e){T(!0),E("Information of ".concat(c.name," has already been deleted from server.")),setTimeout((function(){E(null)}),3e3)}))}}else{var o={name:j,number:v};m.create(o).then((function(e){r(t.concat(e)),f(""),x(""),T(!1),E("".concat(j," added to contacts.")),setTimeout((function(){E(null)}),3e3)}))}},nameInputValue:j,handleNameChange:function(e){f(e.target.value)},numberInputValue:v,handleNumberChange:function(e){x(e.target.value)}}),Object(c.jsx)("h3",{children:"Contacts"}),Object(c.jsx)(s,{persons:t,search:w,deleteContact:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name,"?"))&&m.deleteContact(e).then((function(){r(t.filter((function(n){return n.id!==e}))),T(!1),E("".concat(n.name," deleted from contacts.")),setTimeout((function(){E(null)}),3e3)})).catch((function(e){T(!0),E("".concat(n.name," has already been deleted from server.")),setTimeout((function(){E(null)}),3e3)}))}})]})};t(38);o.a.render(Object(c.jsx)(O,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.44f566eb.chunk.js.map